# 基本数据类型与变量

---

## 为什么我们需要数据类型

首先，我们需要明确一点，计算机程序的本质用途是处理数据。数据是程序的输入，程序对数据进行处理，然后输出结果。但计算机只能处理 0 和 1 组成的二进制数据，为了程序的可读性，我们需要人为地对数据进行分类，这就是数据类型的作用。

## C 语言的基本数据类型

C 语言的数据类型实在是太过丰富了，如果我们在这里列一张表，那么它大概会占据整篇文章的大部分空间，因此，我们不会在这里列出所有的数据类型，而只是按照分类给出一些常用的数据类型。

> 详细的数据类型请参考：[C 语言数据类型](https://zh.cppreference.com/w/c/language/type)和[C++语言数据类型](https://zh.cppreference.com/w/cpp/language/types)

### 整形

整形是 C 语言中最基本的数据类型，它用来表示整数，一般情况下，一个整数类型有以下性质：

1. 大小：标定了一个整数类型占用的字节数，例如，`int`类型一般占用 4 个字节。
2. 有无符号：标定了一个整数类型是否可以表示负数，例如，`unsigned int`类型只能表示非负数，而`signed int`类型可以表示正数、负数和 0。

整数家族是庞大的，它包括了`char`、`short`、`int`、`long`、`long long`等类型，它们的大小和有无符号性质是不同的。

由于标准中对上述类型的规定模糊不清，我们更推荐使用另一套整数家族，它包括了`int8_t`、`uint8_t`、`int16_t`、`uint16_t`、`int32_t`、`uint32_t`、`int64_t`、`uint64_t`等类型，它们的大小和有无符号性质是明确的。简单来说，前缀`u`表示无符号，后缀`8`、`16`、`32`、`64`表示占用的字节数。

要使用这些类型，需要引入头文件`<stdint.h>`。

### 浮点型

浮点型是 C 语言中用来表示小数的数据类型，它包括了`float`、`double`、`long double`等类型，它们的大小和精度是不同的。

> 浮点数不等同于实数，它只能近似地表示实数。

### 字符型

字符实际上是一个整数，它用来表示一个字符，它的大小通常是 1 个字节，它的有无符号性质是不确定的，标准中使用`char`表示字符类型。

### 空类型

空类型是 C 语言中用来表示空的数据类型，用`void`表示，不能定义`void`类型的变量。

## 变量

要声明变量，我们需要了解变量的三个要素，即变量的类型、变量的名字和变量的值。

因此，只要交代清楚了这三个要素，我们就可以定义一个变量了，例如：

```c

int a = 1;

```

这里，`int`是变量的类型，`a`是变量的名字，`1`是变量的值。

> 一个老生常谈的话题是，计算机程序中的`=`符号并不是数学中的等号，它表示赋值，而不是相等。因此，`int a = 1;`表示将 1 赋值给 a，而不是 a 等于 1。

## 常量

常量是一种特殊的变量，它的值在定义之后不能改变。在 C 语言中，常量有两种，一种是字面常量，一种是符号常量。

### 字面常量

字面常量是一种直接出现在程序中的常量，它的值是固定的，例如：

```c

int a = 1;

```

这里的`1`就是一个字面常量，显然，我们不能改变`1`的值。

不同类型的字面量有不同的表示方法，例如：

- 整数常量：`1`、`2`、`3`、`4`、`5`、`6`、`7`、`8`、`9`、`0`、`0x1`、`0x2`、`0x3`、`0x4`、`0x5`、`0x6`、`0x7`、`0x8`、`0x9`、`0x0`等。
- 浮点常量：`1.0`、`2.0`、`3.0`、`4.0`、`5.0`、`6.0`、`7.0`、`8.0`、`9.0`、`0.0`、`1.0e-1`、`2.0e-2`、`3.0e-3`、`4.0e-4`、`5.0e-5`、`6.0e-6`、`7.0e-7`、`8.0e-8`、`9.0e-9`、`0.0e0`等。
- 字符常量：`'a'`等，实际上，字符常量是整数常量的一种特殊形式。

### 符号常量

符号常量是一种在程序中定义的常量，它的值是固定的，例如：

```c

const int a = 1;

```

这里的`a`就是一个符号常量。

<!-- TODO: 决议 -->

> （常智德）很多教程认为`#define`定义的常量是符号常量，但个人认为`#define`是一种宏定义，它不应该和符号常量混淆。

## 变量运算

变量可以进行运算，例如：

```c

int a = 1;
int b = 2;
int c = a + b;

```

在数学中常见的基础运算符在 C 语言中都有对应的运算符，例如：

- 加法：`+`
- 减法：`-`
- 乘法：`*`
- 除法：`/`
- 取余：`%`

在一般的数学表达式中，这些运算符有不同的优先级，这一点在 C 语言中也是一样的，但我们不希望读者去记忆这些优先级，如果你希望某个部分先运算，那么你可以使用括号：

```c

int a = 1;
int b = 2;
int c = (a + b) * 2;

```

大部分情况下，运算符的优先级和数学中的优先级是一样的，如果你不确定，那么你可以使用括号，或者参考[运算符优先级](https://zh.cppreference.com/w/c/language/operator_precedence)。

> 值得注意的是，因为有类型的概念，所以运算符的行为也是和类型相关的，具体来说，只有相同类型的变量才能进行运算，否则需要进行类型转换。这种类型转换一般会由编译器自动完成，参见[隐式类型转换](https://zh.cppreference.com/w/c/language/conversion)。

## 特殊运算符

C 语言中还有一些特殊的运算符，它包括高级运算符、位运算符、逻辑运算符、关系运算符等，下面介绍一些常见的特殊运算符。

### 高级运算符

> 这里的高级运算符实际上表示比上述基础运算符更复杂的运算符，C 语言本身并没有高级运算符这个概念。

#### 自增和自减

自增和自减是 C 语言中的两个特殊运算符，它们分别是`++`和`--`，它们的作用是将变量的值加一和减一，例如：

```c

int a = 1;  // a = 1
a++;        // a = 2
a--;        // a = 1

```

自增和自减有两种形式，一种是前缀形式，一种是后缀形式，例如：

```c

int a = 1;  // a = 1
int b = ++a; // a = 2, b = 2
int c = a++; // a = 3, c = 2

```

前缀形式会先进行运算，并将运算后的值赋给变量，后缀形式会先将变量的值赋给另一个变量，然后再进行运算。

#### 复合赋值运算符

复合赋值运算符是一种将运算和赋值合并在一起的运算符，它包括了`+=`、`-=`、`*=`、`/=`、`%=`等运算符，例如：

```c

int a = 1;  // a = 1
a += 1;     // 等同于 a = a + 1;
```

### 位运算符

位运算符是一种直接操作二进制位的运算符，它包括了`&`、`|`、`^`、`~`、`<<`、`>>`等运算符，例如：

```c

int a = 1;  // a = 00000001
int b = 2;  // b = 00000010
int c = a & b; // c = 00000000  按位与，对比两个数的二进制位，都为 1 则为 1，否则为 0
int d = a | b; // d = 00000011  按位或，对比两个数的二进制位，有一个为 1 则为 1，否则为 0
int e = a ^ b; // e = 00000011  按位异或，对比两个数的二进制位，相同则为 0，不同则为 1
int f = ~a;    // f = 11111110  按位取反，对比一个数的二进制位，0 变 1，1 变 0
int g = a << 1; // g = 00000010  左移，将一个数的二进制位向左移动 n 位，右边补 0
int h = a >> 1; // h = 00000000  右移，将一个数的二进制位向右移动 n 位，左边补 0

```

位运算符常见于单片机、嵌入式等领域，它们可以用来进行一些高效的操作。

### 逻辑运算符

逻辑运算符是一种用来进行逻辑运算的运算符，它包括了`&&`、`||`、`!`等运算符，例如：

```c

int a = 1;
int b = 2;
int c = a && b; // c = 1  逻辑与，两个数都为真则为真，否则为假
int d = a || b; // d = 1  逻辑或，两个数有一个为真则为真，否则为假
int e = !a;     // e = 0  逻辑非，真变假，假变真

```

### 关系运算符

关系运算符是一种用来进行关系运算的运算符，它包括了`==`、`!=`、`>`、`<`、`>=`、`<=`等运算符，例如：

```c

int a = 1;
int b = 2;
int c = a == b; // c = 0  判断两个数是否相等
int d = a != b; // d = 1  判断两个数是否不相等
int e = a > b;  // e = 0  判断一个数是否大于另一个数
int f = a < b;  // f = 1  判断一个数是否小于另一个数
int g = a >= b; // g = 0  判断一个数是否大于等于另一个数
int h = a <= b; // h = 1  判断一个数是否小于等于另一个数

```

## C++

### 新的变量声明方式

C++ 中引入了新的变量声明方式，包括括号初始化和列表初始化，例如：

```c++

int a(1); // 括号初始化，行为上等同于 int a = 1;
int b{1}; // 列表初始化，行为上等同于 int b = 1;

```

此外，C++ 中还引入了`auto`关键字，它可以用来自动推导变量的类型，例如：

```c++

auto a = 1; // a 的类型是 int

```

> 在 C 语言中，`auto`也是一个关键字，但它的行为和 C++ 中的`auto`不同，这里不做详细介绍。

### 布尔类型

C++ 中引入了布尔类型，它用来表示真和假，如果你细心观察，你会发现上文中，我们使用`int`类型来表示真和假，这是因为老的 C 语言标准中并没有布尔类型，而 C++ 中引入了布尔类型，它包括了`bool`类型，它的值只有`true`和`false`。

## 练习

习题：

> I. 使用公式℃$=\frac{5}{9}($℉$-32)$​，计算出50华氏度下对应的摄氏度
>
> II. 再次使用你书写的程序计算0华氏度下对应的摄氏度，跟你手动计算出的结果有不一样的地方吗？为什么？
>
> [参考答案请点击这里](../../code/exercise/Exercise_03.md)

## 注意

1. 你无法用字符常量表示一个汉字，因为汉字占用的字节数通常是大于 1 的。

   （如果想要有更多的了解，尝试回忆一下GBK编码和UTF8编码，更进一步的，你可以猜测为什么使用MSVC编译器在Debug模式下出现越界访问会出现一大堆烫）
