# 高级数据类型

---

我们之前介绍了一些基本的数据类型，这一章我们将介绍一些之后会用到的高级数据类型。

## 结构体

结构体是用户定义的数据类型，它可以包含一组相关的、不同类型的数据：

```c

struct Point {
    int x;
    int y;
};

```

上面的代码定义了一个结构体 `Point`，它包含两个 `int` 类型的成员 `x` 和 `y`。

要声明并初始化一个结构体变量，你需要使用结构体名和成员名：

```c

struct Point p = {1, 2};

```

要访问结构体的成员，你需要使用成员访问运算符 `.`：

```c

p.x = 3;
p.y = 4;

```

## 类型别名

### C 语言风格的类型别名

类型别名是一个已存在的类型的别名，它可以让你使用一个更加简洁的名字来表示一个类型。

以上文中的结构体 `Point` 为例，你可以使用 `typedef` 来定义一个类型别名：

```c

typedef struct Point Point;

```

这样，你就可以使用 `Point` 来代替 `struct Point`。

当然，你也可以在定义结构体的时候直接定义类型别名：

```c

typedef struct {
    int x;
    int y;
} Point;

```

这样，你就可以直接使用 `Point` 来声明结构体变量了。

### C++ 风格的类型别名

C++ 提供了一个更加方便的类型别名语法——`using`：

```cpp

using Point = struct {
    int x;
    int y;
};

```

或者：

```cpp

using Point = struct Point;

```

但实际上，即便你不使用别名，C++中也可以直接除去 `struct` 关键字：

```cpp

Point p = {1, 2};

```

`using`是一个多功能关键字，别名只是它的一种用法。

## C++ 类

某种程度上来说，C++ 的类是结构体的升级版。类是一种用户定义的数据类型，它可以包含成员变量和成员函数。

相比于结构体，类的成员变量和成员函数都有访问权限，你可以使用 `public`、`protected` 和 `private` 关键字来指定成员的访问权限。

此外，类不仅可以包含成员变量，还可以包含成员函数，这些函数被称为类的方法。

下面是一个简单的类的例子：

```cpp

class Point {
  // 私有成员，外部不可访问
  private:
    int x;
    int y;

  // 公有成员，外部可访问
  public:
    void set(int x, int y) {
        // 暂时忽略这个关键字
        this->x = x;
        this->y = y;
    }
};

```

访问类的成员函数和成员变量的方法和结构体一样，你需要使用成员访问运算符 `.`：

```cpp

Point p;
p.set(1, 2);

```

类有太多的特性，本教程不会详细介绍，在这里提及类的目的是为了让你知道类是什么，以及类成员的访问方法，详细了解类请参考[类特性](https://zh.cppreference.com/w/cpp/language/class)。

## 枚举

枚举是一种用户定义的数据类型，它可以包含一组相关的、有限的、整数类型的值。

下面是一个简单的枚举的例子：

```c

enum Color {
    RED,
    GREEN,
    BLUE
};

```

此时，`RED`、`GREEN` 和 `BLUE` 都是 `Color` 类型的值，它们的值分别是 0、1 和 2。

你也可以手动指定枚举值的值：

```c

enum Color {
    RED = 1,
    GREEN = 2,
    BLUE = 3
};

```

一般情况下，枚举的整数类型是 `int`，但你也可以手动指定枚举的整数类型：

```c

enum Color : unsigned char {
    RED = 1,
    GREEN = 2,
    BLUE = 3
};

```

要声明一个枚举变量，你需要使用枚举名和枚举值：

```c

enum Color c = RED;

```

你可以用枚举来替代一些语义明确的整数值，这样可以使你的代码更加清晰，比如：

```c

enum Weekday {
    MONDAY = 1,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
};

```

### C++ 风格的枚举类

C++ 提供了一个更加方便的枚举类型——`enum class`。`enum class` 是上述 C 语言风格枚举的升级版：

```cpp

enum class Color {
    RED,
    GREEN,
    BLUE
};

```

如果你想要使用枚举类的值，你需要使用枚举名和作用域解析运算符 `::`：

```cpp

Color c = Color::RED;

```

## 列表

### C 语言风格的数组

数组用来表示一个序列的数据，比如，如果你想表示一个月内某地的气温数据，你可以使用一个长度为 30 的数组来表示这些数据。

要声明一个数组，你需要明确数组的几个要素——数组类型、数组名、数组长度和初值。下面是一个简单的数组声明：

```c

// 声明一个长度为 5 的 int 类型的数组，数组名为 arr，初值为 1, 2, 3, 4, 5
int arr[5] = {1, 2, 3, 4, 5};

```

要访问数组的元素，你需要使用下标运算符 `[]`，下标从 0 开始。比如，要访问数组 `arr` 的第 3 个元素，你需要使用 `arr[2]`。

数组的每个元素都是一个变量，你可以对它们进行变量可以进行的任何操作。

数组的长度是固定的，一旦声明，你就不能再改变它的长度。但初始化数组的时候，你可以使用变量来指定数组的长度。

> 不推荐使用变量来指定数组的长度，因为这样会使代码更容易出错，并且它不支持 C++

### C++ 风格的数组

C++ 提供了一个更加方便的数组类型——`std::array`。`std::array` 是对上述 C 语言风格数组的封装，它提供了一些方便的方法来操作数组。

要使用 `std::array`，你需要包含头文件 `<array>`，下面是使用 `std::array` 的一个例子：

```cpp

#include <array>

// 声明一个长度为 5 的 int 类型的数组，数组名为 arr，初值为 1, 2, 3, 4, 5
std::array<int, 5> arr = {1, 2, 3, 4, 5};

```

> 尖括号包裹的参数称为模板参数，本教程不会详细介绍

`std::array` 提供了一些方便的方法来操作数组，比如，你可以使用 `arr.size()` 来获取数组的长度，使用 `arr.at(i)` 来访问数组的第 `i` 个元素。

当然，你也可以使用下标运算符 `[]` 来访问数组的元素，这个操作通常比 `arr.at(i)` 更快，但也更加危险。

更多的 `std::array` 的方法请参考[std::array](https://zh.cppreference.com/w/cpp/container/array)。

### C++ 风格的变长数组

变长数组是 C++ 标准库自带的类型，它可以动态地改变数组的长度。

要使用变长数组，你需要包含头文件 `<vector>`，下面是使用变长数组的一个例子：

```cpp

#include <vector>

// 声明一个长度为 5 的 int 类型的数组，数组名为 arr，初值为 1, 2, 3, 4, 5
std::vector<int> arr = {1, 2, 3, 4, 5};

```

访问变长数组的元素和访问 `std::array` 的元素一样，你可以使用 `arr.size()` 来获取数组的长度，使用 `arr.at(i)` 来访问数组的第 `i` 个元素。

除此之外，你可以使用 `arr.push_back(x)` 来在数组的末尾添加一个元素，使用 `arr.pop_back()` 来删除数组的最后一个元素，数组的长度会相应地改变。

更多的 `std::vector` 的方法请参考[std::vector](https://zh.cppreference.com/w/cpp/container/vector)。

## 字符串

字符串是一种特殊的数组，它用来表示一串字符。

### C 语言风格的字符串

C 语言风格的字符串是一个以空字符 `\0` 结尾的字符数组，你可以使用字符数组来表示一个字符串。

要声明一个字符串，你需要使用字符数组，下面是一个简单的字符串声明：

```c

// 声明一个字符串，字符串名为 s，初值为 "Hello, world!"
char s[] = "Hello, world!";

```

双引号包括的字符序列称为字符串字面量，它会被编译器转换成一个以空字符 `\0` 结尾的字符数组。

C 语言提供了名为 `string.h` 的头文件，它包含了一些方便的方法来操作字符串，比如，你可以使用 `strlen(s)` 来获取字符串的长度，使用 `strcpy(s1, s2)` 来将字符串 `s2` 复制到字符串 `s1`。

更多的 `string.h` 的方法请参考[string.h](https://zh.cppreference.com/w/c/string)。

### C++ 风格的字符串

C++ 提供了一个更加方便的字符串类型——`std::string`。`std::string` 是对上述 C 语言风格字符串的封装，它提供了一些方便的方法来操作字符串。

要使用 `std::string`，你需要包含头文件 `<string>`，下面是使用 `std::string` 的一个例子：

```cpp

// 注意，和string.h不同，这里的头文件名是string
#include <string>

// 声明一个字符串，字符串名为 s，初值为 "Hello, world!"
std::string s = "Hello, world!";

```

`std::string` 提供了一些方便的方法来操作字符串，可以参考[std::string](https://zh.cppreference.com/w/cpp/string/basic_string)。

## 练习

> 你现在需要存储一个学生的信息。需要存储它的姓名（字符串），性别（int就好:0男1女），学号（int或者是字符串都可以）。显然通过上面的学习，你需要使用一个结构体（毫无疑问的！）存储它！
>
> I.设计一个这样的结构体：
>
> II. 现在，你将要登记这个学生的信息：
>
> ```
> XiaoMing
> 0
> 19231145
> ```
>
> 你需要实例化一个变量来存储，你应该怎么做？
>
> III.将你存储的这位同学的信息以任何你喜欢的形式打印出来。

[参考答案请点击这里](../../code/exercise/Exercise_06.md)
