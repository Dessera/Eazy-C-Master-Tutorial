# 表达式与流程控制

---

之前我们提到，C 语言编程实际上就是向计算机下达一系列的指令，在这一章，我们赋予了这些指令新的名字——语句，而语句的核心便是表达式。

## 表达式

表达式实际上就是一系列的运算符和操作数的组合，它有一系列输入，然后输出一个结果，例如：

```c

1 + 2 * 3

```

这个表达式的结果是 7。

```c

// 假设我们已经定义了变量 a
a = 1 + 2 * 3

```

这个表达式的结果是 7，同时 a 的值也被赋值为 7。

> 赋值运算符 `=` 是一个特殊的运算符，它的优先级比较低，因此在上面的表达式中，`=` 是最后被执行的，它最终会返回赋值的结果。

语句由表达式组成，它代表一个特定的操作，例如：

```c

// 假设我们已经定义了变量 a
a = 1 + 2 * 3;

```

这个语句代表了一个赋值操作，它的结果是将 1 + 2 \* 3 的结果赋值给 a。注意到，每个语句都以分号 `;` 结尾，这是 C 语言的语法规定。

不同于表达式，语句不会返回一个结果，它只是执行一个操作。

> 变量声明不是语句，它是一个声明，它的作用是告诉编译器我们要使用一个新的变量。

## 流程控制

学会上述内容，你已经可以编写一些简单的程序了，但实际上，我们仍然无法解决一些复杂的问题。

下面是一个数学中常见的分段函数：

$$
f(x) = \left\{
\begin{aligned}
& 1, & x < 0 \\
& 0, & x = 0 \\
& -1, & x > 0 \\
\end{aligned}
\right.
$$

思考一下，如何用 C 语言编写这个函数？

显然，以单纯的表达式和语句是无法解决这个问题的，因此，我们需要引入流程控制。

流程控制是一种用来控制程序执行流程的机制，它包括了条件语句和循环语句。

### 条件语句

条件语句是一种用来根据条件来执行不同的操作的语句，它包括了`if`语句和`switch`语句。

#### if 语句

`if`语句是一种用来根据条件来执行不同的操作的语句，它的基本结构如下：

```c

if (condition) {
    // 如果 condition 为真，则执行这里的语句
}

if (condition) {
    // 如果 condition 为真，则执行这里的语句
} else {
    // 如果 condition 为假，则执行这里的语句
}

if (condition1) {
    // 如果 condition1 为真，则执行这里的语句
} else if (condition2) {
    // 如果 condition1 为假，condition2 为真，则执行这里的语句
} else {
    // 如果 condition1 和 condition2 都为假，则执行这里的语句
}

```

利用`if`语句，我们可以编写上述的分段函数：

```c

// 假设我们已经定义了变量 x 和 f
if (x < 0) {
    f = 1;
} else if (x == 0) {
    f = 0;
} else {
    f = -1;
}

```

> `if`语句是顺序执行的，即只有当上一个条件为假时，才会执行下一个条件，如果上一个条件为真，则会跳过后续的所有条件。

#### switch 语句

`switch`语句是一种用来根据条件来执行不同的操作的语句，它的基本结构如下：

```c

switch (expression) {
    case constant1:
        // 如果 expression 的值等于 constant1，则执行这里的语句
        break;
    case constant2:
        // 如果 expression 的值等于 constant2，则执行这里的语句
        break;
    default:
        // 如果 expression 的值不等于任何一个 constant，则执行这里的语句
        break;
}

```

#### 特殊的三元运算符

C 语言中还有一种特殊的三元运算符，它的基本结构如下：

```c

condition ? expression1 : expression2

```

它的作用是根据 condition 的值来选择执行 expression1 或 expression2，如果 condition 为真，则执行 expression1，否则执行 expression2。

某些情况下，三元运算符可以替代`if`语句，例如：

```c

// 假设我们已经定义了变量 x
int f = x < 0 ? 1 : (x == 0 ? 0 : -1);

```

这行代码的作用和上面的`if`语句是一样的。

### 循环语句

循环语句是一种用来重复执行一系列操作的语句，它包括了`while`语句、`do-while`语句和`for`语句。

#### while 语句

`while`语句是一种用来重复执行一系列操作的语句，它的基本结构如下：

```c

while (condition) {
    // 只要 condition 为真，则重复执行这里的语句
}

```

#### do-while 语句

`do-while`语句是一种用来重复执行一系列操作的语句，它的基本结构如下：

```c

do {
    // 无论如何，先执行这里的语句
} while (condition);

```

#### for 语句

`for`语句是一种用来重复执行一系列操作的语句，它的基本结构如下：

```c

// initialization 用来初始化循环变量，可以是一个声明，也可以是一个赋值表达式
// update 用来更新循环变量，是一个表达式
for (initialization; condition; update) {
    // 只要 condition 为真，则重复执行这里的语句
}

```

利用循环语句，我们可以编写一个简单的计算阶乘的程序：

```c

// 假设我们已经定义了变量 n
int result = 1;
for (int idx = 1; idx <= n; idx++) {
    result *= idx;
}

```

### 特殊的流程控制语句

C 语言中提供了一些关键字来操控上述的流程控制语句，它们包括了`break`、`continue`和`return`。

#### break

`break`语句用来跳出当前的循环或`switch`语句，例如：

```c

for (int idx = 1; idx <= 10; idx++) {
    if (idx == 5) {
        break;
    }
    // 只有当 idx 不等于 5 时，才会执行这里的语句，否则会跳出循环
}

```

#### continue

`continue`语句用来跳过当前循环的剩余部分，例如：

```c

for (int idx = 1; idx <= 10; idx++) {
    if (idx == 5) {
        continue;
    }
    // 当 idx 等于 5 时，会跳过这里的语句，继续执行下一次循环
}

```

#### return

`return`语句用来结束一个函数的执行，详情请参考[函数](./05-函数.md)。

## 练习

等待补充。
